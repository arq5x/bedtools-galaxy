<tool id="BEDTools_genomeCoverageBed_histogram" name="Genome Coverage Histogram" version="0.1">
	<description></description>
	<command>genomeCoverageBed
		#if $input.ext == "bam"
			-ibam '$input'
		#else
			-i '$input'
		#end if
#if $genomefile.source == "dbkey":
		-g ${GALAXY_DATA_INDEX_DIR}/BEDTools/chrom_sizes/${dbkey}
#end if
#if $genomefile.source == "custom":
		-g '$genomefile.genome_custom_file'
#end if
		&gt; '$output'
	</command>

	<inputs>
		<param format="bed,bam" name="input" type="data" label="BED/BAM File">
		</param>

		<conditional name="genomefile">
			<param name="source" type="select" label="Genome's database">
				<option value="dbkey">Standard Genome, based on Dataset's organism</option>
				<option value="custom">Use custom dataset</option>
			</param>

			<when value="dbkey">
				<!-- the "dbkey" will set the database, no need for use input -->
			</when>

			<when value="custom">
				<param name="genome_custom_file" type="data" format="tabular" label="Genome Database File" help="Must contains two columns: chromosome and length" />
			</when>
		</conditional>
	</inputs>

	<outputs>
		<data format="tabular" name="output"  metadata_source="input" label="$input.tag (Genome Coverage Histogram)" />
	</outputs>
	<help>
**What it does**

This tool calculates the genome coverage depth based on mapped reads.

.. class:: infomark

Use **Genome Coverage Plot** tool to plot the textual output of this tool.

------

The output file will contain five columns:

    * Chromosome name (or 'genome' for whole-genome coverage)
    * Coverage depth
    * number of bases on chromosome (or genome) with depth equal to column 2.
    * size of chromosome (or entire genome) in base pairs
    * fraction of bases on chromosome (or entire genome) with depth equal to column 2.

**Example Output**::
    
    chr2L       0           1379895     23011544    0.0599653
    chr2L       1           837250      23011544    0.0363839
    chr2L       2           904442      23011544    0.0393038
    chr2L       3           913723      23011544    0.0397072
    chr2L       4           952166      23011544    0.0413778
    chr2L       5           967763      23011544    0.0420555
    chr2L       6           986331      23011544    0.0428624
    chr2L       7           998244      23011544    0.0433801
    chr2L       8           995791      23011544    0.0432735
    chr2L       9           996398      23011544    0.0432999



For more information see section 5.12 (GenomeCoverageBed) in the BEDTools manual (http://bedtools.googlecode.com/files/BEDTools-User-Manual.pdf)

------

This tool is part of the `BEDTools package`__ from the `Quinlan laboratory`__.

.. __: http://code.google.com/p/bedtools/
.. __: http://cphg.virginia.edu/quinlan/

 

</help>
</tool>
