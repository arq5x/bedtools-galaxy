<tool id="bamtobed" name="Convert from BAM to BED." version="2.14.4">
<description></description>

<command>
    bamToBed $option $ed_score -i '$input' &gt; '$output' 
    #if str($tag):
      -tag      $tag
    #end if
</command>

<inputs>
    <param format="bam" name="input" type="data" label="Input BAM file"/>
    <param name="option" type="select" label="Output formatting options">
        <option value="">Create a 6-column BED file.</option>
        <option value="-bed12">Create a full, 12-column "blocked" BED file.</option>
        <option value="-bedpe">Create a paired-end, BEDPE format.</option>
    </param>
    <param name="split" type="boolean" label="Report spliced BAM alignments as separate BED entries." truevalue="-split" falsevalue="" checked="false"/>
    <param name="ed_score" type="boolean" label="Use alignment's edit-distance for BED score" truevalue="-ed" falsevalue="" checked="false"/>
    <param name="tag" type="text" optional="true" label="Use other NUMERIC BAM alignment tag as the BED score"/>
</inputs>

<outputs>
    <data format="bed" name="output" metadata_source="input" label="${input.name} (as BED)"/>
</outputs>

<help>

**What it does**

This tool converts a BAM file to a BED file. The end coordinate is computed
by inspecting the CIGAR string. The QNAME for the alignment is used as the 
BED name field and, by default, the MAPQ is used as the BED score.

-------

**Options**::
    
    -bedpe  Write BEDPE format.
            - Requires BAM to be grouped or sorted by query.
    
    -bed12  Write "blocked" BED format (aka "BED12").
            http://genome-test.cse.ucsc.edu/FAQ/FAQformat#format1
    
    -split  Report "split" BAM alignments as separate BED entries.
    
    -ed     Use BAM edit distance (NM tag) for BED score.
              * Default for BED is to use mapping quality.
              * Default for BEDPE is to use the minimum of the two mapping qualities for the pair.
              * When -ed is used with -bedpe, the total edit distance from the two mates is reported.
    
    -tag    Use other NUMERIC BAM alignment tag for BED score.
              * Default for BED is to use mapping quality.
              * Disallowed with BEDPE output.
<!--    
    -color  An R,G,B string for the color used with BED12 format.
            Default is (255,0,0).
    
    -cigar  Add the CIGAR string to the BED entry as a 7th column.
-->

------


This tool is part of the `BEDTools package`__ from the `Quinlan laboratory`__.

.. __: http://code.google.com/p/bedtools/
.. __: http://cphg.virginia.edu/quinlan/

</help>
</tool>
